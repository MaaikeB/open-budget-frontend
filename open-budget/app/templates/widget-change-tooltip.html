<div class="trans-<%= color_classname(get("diff_value")) %> <%= changeClass(get("value"), get("value")+get("diff_value")) %> <% if ( get('kind') == 'approved' ) { %>approved<% } %>">
  <div id="trans-tip" class="widget-popover fade in bottom">
  <% if ( get("src") == "changeline" ) { %>
    <!-- <div class="arrow"></div> -->
    <div class="widget-popover-title">
        <% var diff = get("source").getCodeChanges(window.pageModel.get('budgetCode')).expense_change*1000; %>
        <% var revised = get("value")*1000; %>
        <h2 class="revised-diff ">&lrm;<%= number_plus_minus(diff) %> ₪<%= format_full_number( diff ) %>&rlm; </h2>
        <h2>=</h2>
        <h2 class="revised"><%= format_full_number( revised ) %>₪</h2>
        <% if ( diff < 0 ) { %>
            <p><%= (100 * (-diff / (revised - diff))).toFixed(1) + "%" %>
                קיצוץ מתקציב
                <%= get("source").get("year") %></p>
        <% } %>
        <% if ( diff > 0 ) { %>
            <p><%= (100 * (diff / (revised - diff))).toFixed(1) + "%" %>
                תוספת לתקציב
                <%= get("source").get("year") %></p>
        <% } %>
    </div>
    <div class="widget-popover-content">
    </div>
  <% } else { %>
      <% if ( get('kind') == 'approved' ) { %>
        <!-- <div class="arrow"></div> -->
        <div class="widget-popover-title">
          <p> תקציב <%= get("source").get("year") %> <% if ( get("continued") ) { %>(המשכי)<% } %>
          </p>
          <h2><%= format_full_number( get("value")*1000 ) %>₪</h2>
        </div>
        <div class="widget-popover-content">
            <% if ( !get('exact') ) { %>
                <b>משוערך</b> לפי הסעיפים הבאים:
                <ul>
                    <% var codes = get('source').get('orig_codes'); for ( var _i = 0 ; _i < codes.length ; _i++ ) { %>
                    <li><%= codes[_i] %></li>
                    <% } %>
                </ul>
            <% } %>
        </div>
      <% } else if ( get('kind') == 'used' ) { %>
        <div class="widget-popover-title">
            <h2 class="approved"><%= format_full_number( get("source").get('net_allocated')*1000 ) %>₪</h2>
            <% var diff = (get("source").get('net_revised') - get("source").get('net_allocated'))*1000; %>
            <% var revised = get("source").get('net_revised')*1000; %>
            <h2 class="revised-diff ">&lrm;<%= number_plus_minus(diff) %> ₪<%= format_full_number( diff ) %>&rlm; </h2>
            <h2>=</h2>
            <h2 class="revised"><%= format_full_number( revised ) %>₪</h2>
            <% if ( diff < 0 ) { %>
                <p><%= (100 * (-diff / (revised - diff))).toFixed(1) + "%" %>
                    קיצוץ מתקציב
                    <%= get("source").get("year") %></p>
            <% } %>
            <% if ( diff > 0 ) { %>
                <p><%= (100 * (diff / (revised - diff))).toFixed(1) + "%" %>
                    תוספת לתקציב
                    <%= get("source").get("year") %></p>
            <% } %>
            <p>
        </div>
        <div class="widget-popover-content">
            <h2 class="used"><%= format_full_number( get("source").get('net_used')*1000 ) %>₪</h2>
            <p>(ההוצאה בפועל)</p>
        </div>
      <% } %>
  <% } %>
  </div>
</div>
